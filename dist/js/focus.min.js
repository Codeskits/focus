!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.Focus=i()}(this,function(){"use strict";function t(t){return"string"==typeof t?document.querySelector(t):t}function i(t,i){var e=0,s=t.slice(Math.max(t.length-i,1));return s.forEach(function(t){return e+=t}),Math.ceil(e/i)}function e(t,i){return new Array(t).fill(i)}var s=function(i,e){this.el=t(i),this.settings=e,this.init()};return s.prototype.init=function(){this.sections=Array.from(this.el.querySelectorAll(".section")),this.currentSection=0,this.slides=this.getSlides(),this.slidesCount=this.getSlidesCount(),this.activeSlide="",this.currentSlides=e(this.sections.length,0),this.isSliding=!1,this.scrollingValues=[],this.initDots(),this.initKeyboard(),this.initScroll(),this.goToSection(0),this.goToSlide(this.slides[0])},s.prototype.initDots=function(){var t=this;this.fragment=document.createDocumentFragment();var i=document.createElement("ul");i.classList.add("focus-nav"),i.insertAdjacentHTML("afterbegin",'<li><a class="focus-dot"></a></il>'.repeat(this.sections.length)),this.fragment.appendChild(i),document.body.appendChild(this.fragment),this.dots=Array.from(document.querySelectorAll(".focus-dot")),this.dots.forEach(function(i,e){i.addEventListener("click",function(){t.goToSection(e)},!1)})},s.prototype.initKeyboard=function(){var t=this;window.addEventListener("keydown",function(i){if(!i.defaultPrevented){switch(i.key){case"ArrowDown":t.nextSection();break;case"ArrowUp":t.previousSection();break;case"ArrowRight":t.slideRight();break;case"ArrowLeft":t.slideLeft();break;default:return}i.preventDefault()}},!0)},s.prototype.initScroll=function(){function t(t){event.preventDefault();var e=t.wheelDelta||-t.deltaY||-t.detail,s=Math.max(-1,Math.min(1,e));this.scrollingValues.length>99&&this.scrollingValues.shift(),this.scrollingValues.push(Math.abs(e));var n=i(this.scrollingValues,50),o=i(this.scrollingValues,10);if(!(o<n))return 1===s?(this.previousSection(),!1):s===-1?(this.nextSection(),!1):void 0}window.addEventListener("mousewheel",t.bind(this),!1),window.addEventListener("DOMMouseScroll",t.bind(this),!1)},s.prototype.nextSection=function(){this.currentSection>=this.sections.length-1||this.goToSection(this.currentSection+1)},s.prototype.previousSection=function(){this.currentSection<=0||this.goToSection(this.currentSection-1)},s.prototype.goToSection=function(t){var i=this;this.isSliding||(this.isSliding=!0,this.el.style.transform="translate3d(0, -"+t*window.innerHeight+"px, 0)",this.sections[this.currentSection].classList.remove("is-active"),this.dots[this.currentSection].classList.remove("is-active"),this.currentSection=t,this.sections[this.currentSection].classList.add("is-active"),this.dots[this.currentSection].classList.add("is-active"),setTimeout(function(){return i.isSliding=!1},500))},s.prototype.slideRight=function(){var t=this.slidesCount[this.currentSection],i=this.currentSlides[this.currentSection];i<t-1&&this.goToSlide(i+1)},s.prototype.slideLeft=function(){var t=this.currentSlides[this.currentSection];t>0&&this.goToSlide(t-1)},s.prototype.goToSlide=function(t){var i=this.slidesCount[this.currentSection];0!==i&&(this.activeSlide&&this.activeSlide.classList.remove("is-active"),this.activeSlide=this.slides[this.currentSection][t],this.activeSlide.classList.add("is-active"),this.currentSlides[this.currentSection]=t,this.sections[this.currentSection].style.marginLeft="-"+100*t+"%")},s.prototype.getSlidesCount=function(){return this.sections.map(function(t){return Array.from(t.querySelectorAll(".slide")).length})},s.prototype.getSlides=function(){return this.sections.map(function(t){return Array.from(t.querySelectorAll(".slide"))})},s});